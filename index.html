<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fedelesh Petals</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 10px; background-color: var(--tg-theme-bg-color, #fff); color: var(--tg-theme-text-color, #000); }
        .container { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .card { border: 1px solid #eee; border-radius: 10px; padding: 10px; text-align: center; background: var(--tg-theme-secondary-bg-color, #f9f9f9); }
        .card img { width: 100%; border-radius: 8px; height: 100px; object-fit: cover; }
        .title { font-size: 14px; font-weight: bold; margin: 5px 0; }
        .price { color: #e91e63; font-weight: bold; }
        .btn { background-color: #388e3c; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 5px; width: 100%; }
        .btn-remove { background-color: #d32f2f; display: none; }
    </style>
</head>
<body>

    <h2 style="text-align:center;">Fedelesh Petals ðŸŒ¸</h2>
    <div class="container" id="list"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // Ð Ð¾Ð·Ð³Ð¾Ñ€Ñ‚Ð°Ñ”Ð¼Ð¾ Ð½Ð° Ð²ÐµÑÑŒ ÐµÐºÑ€Ð°Ð½

        // Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð¾Ð²Ð°Ñ€Ñ–Ð² (Ð¼Ð°Ñ” ÑÐ¿Ñ–Ð²Ð¿Ð°Ð´Ð°Ñ‚Ð¸ Ð· Ñ‚Ð¸Ð¼, Ñ‰Ð¾ Ð²Ð¸ Ñ…Ð¾Ñ‡ÐµÑ‚Ðµ Ð¿Ñ€Ð¾Ð´Ð°Ð²Ð°Ñ‚Ð¸)
        const products = [
            {id: "p1", name: "101 Ð¢Ñ€Ð¾ÑÐ½Ð´Ð°", price: 5000, img: "https://i.imgur.com/bKj1xJt.jpeg"},
            {id: "p2", name: "Ð¢ÑŽÐ»ÑŒÐ¿Ð°Ð½Ð¸", price: 1200, img: "https://i.imgur.com/HoH0YwX.jpeg"},
            {id: "p3", name: "ÐŸÑ–Ð²Ð¾Ð½Ñ–Ñ— Box", price: 2500, img: "https://i.imgur.com/zN2ZgqM.jpeg"},
            {id: "p4", name: "ÐÐ²Ñ‚Ð¾Ñ€ÑÑŒÐºÐ¸Ð¹", price: 1800, img: "https://i.imgur.com/Xq3xFzV.jpeg"}
        ];

        const cart = {};
        const list = document.getElementById("list");
        const mainBtn = tg.MainButton;

        // Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ðº Ñ‚Ð¾Ð²Ð°Ñ€Ñ–Ð²
        products.forEach(item => {
            const el = document.createElement("div");
            el.className = "card";
            el.innerHTML = `
                <img src="${item.img}">
                <div class="title">${item.name}</div>
                <div class="price">${item.price} Ð³Ñ€Ð½</div>
                <button class="btn" id="btn${item.id}" onclick="toggleItem('${item.id}', ${item.price})">Ð”Ð¾Ð´Ð°Ñ‚Ð¸</button>
            `;
            list.appendChild(el);
        });

        // Ð›Ð¾Ð³Ñ–ÐºÐ° Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð² ÐºÐ¾ÑˆÐ¸Ðº
        function toggleItem(id, price) {
            const btn = document.getElementById("btn" + id);
            if (!cart[id]) {
                cart[id] = { count: 1, price: price };
                btn.innerText = "Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸";
                btn.style.backgroundColor = "#d32f2f";
            } else {
                delete cart[id];
                btn.innerText = "Ð”Ð¾Ð´Ð°Ñ‚Ð¸";
                btn.style.backgroundColor = "#388e3c";
            }
            updateMainButton();
        }

        function updateMainButton() {
            let total = 0;
            for (let k in cart) total += cart[k].price;
            
            if (total > 0) {
                mainBtn.setText(`Ð—Ð°Ð¼Ð¾Ð²Ð¸Ñ‚Ð¸ Ð½Ð° ${total} Ð³Ñ€Ð½`);
                mainBtn.show();
            } else {
                mainBtn.hide();
            }
        }

        // Ð’Ñ–Ð´Ð¿Ñ€Ð°Ð²ÐºÐ° Ð´Ð°Ð½Ð¸Ñ… Ð½Ð°Ð·Ð°Ð´ Ñƒ Ð±Ð¾Ñ‚Ð°
        Telegram.WebApp.onEvent("mainButtonClicked", function(){
            const data = JSON.stringify(cart);
            tg.sendData(data);
        });
    </script>
</body>
</html>